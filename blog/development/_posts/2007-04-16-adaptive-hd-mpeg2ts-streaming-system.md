---
redirect_from: /blog/2007/04/16/adaptive-hd-mpeg2ts-streaming-system/
title: Adaptive HD MPEG-2 TS Streaming System
tags: MPEG 멀티미디어 적응형 스트리밍
date: 2007-04-16T14:47:00+09:00
modified: 2010-06-30T17:18:26+09:00
---
디디로써의 첫 리딩인가? 사실, 회사 아래에 블로그 시스템을 두는 것을
고려하게 된 사연인 즉, 이렇게 읽은 글들을 어떻게 관리해야 하나... 하는
질문에서 출발하여, 프로젝트에 메이지 않은 (그래서 PMS에 포함시키기는
좀 애매한), 그리고 개인적이지만서도 함께하면 좋은 것들을 쉽게 담을 수
있는 그릇이 뭘까... 하고 접근해보니까 답이 블로그로 귀결되어 버렸다.
개인적이고, 함께 엮여있고, 쉽게 작성하고 나눌 수 있다.
어쨌든, 시작해본다.

오늘의 리딩 - **프레임기반 우선순위화를 이용한 무선랜 환경에서의 적응형
HD MPEG-2 스트림 전송기술** (Adaptive High Definition MPEG-2 TS Streaming
System using Frame-based Prioritized Packetization over IEEE 802.11a WLAN)

제목에 그 내용이 다 담겨있다. 다시 설명하자면, "*품질 보장이 어려운
무선랜 환경*에서 어떻게 하면 보다 매끄럽게 고화질의 HD MPEG-2 스트림을
전송해볼까..." 하는 내용으로, "*네트워크 상황을 지속적으로 파악*하여
비교적 우선순위가 낮은 프레임을 미리 버림으로써 전송률을 조정하고 화면
깨짐을 방지해보자."를 그 해답으로 삼았다는 글이다.

본문은 [여기](http://netmedia.gist.ac.kr/%7Eshpark/publication/IC-3-VCIP2005_WLAN_HD_Streaming.pdf)서
다운받아 보시라.

먼저, 이 논문에서 WLAN, IEEE 802.11a 등은 제목 이상의 의미를 가지지
않는다. 즉, 이 논문은 무선랜 환경을 위하여 특화된 기술을 다루고 있는
것이 아니라, 단지 네트워크 수준에서 QoS가 보장되지 않는 모든 환경,
즉 응용 수순에서 어떻게 하면 QoS를 보장해볼까 하는 것을 주제로 삼고
있다. (조금 실망 :-)

관련하여 같은 연구자의 연관된 논문 몇 편을 더 읽어봤는데, 정리해보면
다음과 같이 요약할 수 있다.

### QoS 개선을 위하여 일반적으로 어떤 노력들이 있어왔는가?

- 비디오 압축률 개선
- 응용 계층에서 QoS 제어
  - 혼합제어
  - 손실률 제어
- 전송 프로토콜 개선
- 미디어 분배 서비스
- 스트리밍 서버
- 미디어 동기화

### 그래서, 이 연구에서는 어떤 방식을 제안하는가?

1. TS 패킷의 실시간 파싱
2. 프레임 기반 패킷 우선순위화 기법

### 어떻게 동작하는가?

1. TS 패킷을 실시간으로 파싱하여 비디오 데이터에 대하여 프레임 유형에
   따른 우선순위를 준다.
2. 클라이언트는 주기적으로 RTP 패킷의 손실율과 전송편차를 측정하여
   서버에 보고한다.
3. 보고된 자료를 바탕으로 전송상태에 대한 등급을 정하고, 이를 기반으로
   프레임을 적절히 버린다.

일단, 읽으면서 재미있는 기술이라는 생각이 든다. 비교 예시로, 깨진
매크로블록이 가득한 정지영상과 깨끗한 정지영상을 그려놓았는데, 사실
동영상에 대한 기술이므로 실제 재생되는 것을 봐야 효과에 대하여 인정이
가능할 것 같다. 화면은 깨지지 않지만 뜩뜩 끊어져 움직인다면...

단순히 화면이 깨지는 것은, 클라이언트 측에서 TS를 파싱하여 손실된
데이터가 있으면 전체 프레임을 버리는 방식으로 구현할 수도 있다. 다만,
이 경우에는 어려운 네트워크가 개선되지 않으므로 오류가 지속적으로
발생할 것이다. 그러나, 서버가 보내는 양을 적절히 줄여서 정말 꼭 필요한
데이터 위주로 전송해준다면 네트워크 상황을 안정화시킬 수, 사실은
안정화는 안되고 최소한의 데이터라도 안정적으로 받을 수 있는 가능성을
높일 수 있겠다.

문제점 하나. 이 구현은 C/S 구조로 동작한다. 즉, 단일 클라이언트측의
리포트에 기반한, 유니케스트 환경에서만 가능한 기법이라는 점.

우리 프로토콜에는 어떻게 적용할 수 있을까? 우리 프로코톨은 이미 A/V가
분리되어있다. 더군다나 프레임 유형 정보도 이미 패키지 안에 들어있다.
그리고 유니케스트가 오히려 기본. 그렇다면 클라이언트가 적절히 보고만
해준다면 V 스트림의 조절이 어렵지 않게 가능하겠는데? 게다가 이미
컨트롤 메시지를 주기적으로 보내고 있지 않은가?

언제 한번... 효과 시험용으로 대충 구현해보는 것도 나쁘지 않겠네.

관련 사이트 :

* [http://netmedia.gist.ac.kr/](http://netmedia.gist.ac.kr/)  
* [http://hdtv.nm.gist.ac.kr/](http://hdtv.nm.gist.ac.kr/)

